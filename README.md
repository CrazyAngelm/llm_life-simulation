# llm_life-simulation

# –ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã —Ç–µ–∫—Å—Ç–æ–≤–æ–π —ç–º—É–ª—è—Ü–∏–∏ –º–∏—Ä–∞

## 1. –ö–û–ù–¶–ï–ü–¢–£–ê–õ–¨–ù–ê–Ø –û–°–ù–û–í–ê –ò –¶–ï–õ–ò

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
- **–ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è**: –≤–∞–∂–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ–¥—Ä–æ–±–Ω–µ–µ
- **–≠–º–µ—Ä–¥–∂–µ–Ω—Ç–Ω–æ—Å—Ç—å**: —Å–ª–æ–∂–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏–∑ –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–∞–≤–∏–ª
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –≤—Å–µ —Å–æ–±—ã—Ç–∏—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã –≤–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ
- **–≠–∫–æ–Ω–æ–º–∏—á–Ω–æ—Å—Ç—å**: –º–∏–Ω–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤ LLM –¥–ª—è –º–∞–∫—Å–∏–º—É–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### –ú–∞—Å—à—Ç–∞–±—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–£—Ä–æ–≤–µ–Ω—å 1 (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π)**: –î–µ—Ç–∞–ª—å–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ –∏—Å—Ç–æ—Ä–∏—è–º–∏
- **–£—Ä–æ–≤–µ–Ω—å 2 (–í–∞–∂–Ω—ã–π)**: –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –≥—Ä—É–ø–ø–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è  
- **–£—Ä–æ–≤–µ–Ω—å 3 (–§–æ–Ω–æ–≤—ã–π)**: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

## 2. –§–ê–ô–õ–û–í–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
/LLM_LIFE-SIMULATION
‚îú‚îÄ‚îÄ /engine                          # üöÄ –î–≤–∏–∂–æ–∫ —Å–∏–º—É–ª—è—Ü–∏–∏ (–æ–±—â–∏–π –¥–ª—è –≤—Å–µ—Ö –º–∏—Ä–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ world_engine.py              # –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Å–∏–º—É–ª—è—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ llm_manager.py               # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ LLM –∑–∞–ø—Ä–æ—Å–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ event_processor.py           # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ chronicle_generator.py       # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ö—Ä–æ–Ω–∏–∫
‚îÇ   ‚îú‚îÄ‚îÄ consistency_checker.py       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ /prompts                     # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ location_events.j2
‚îÇ       ‚îú‚îÄ‚îÄ character_update.j2
‚îÇ       ‚îî‚îÄ‚îÄ chronicle_generation.j2
‚îú‚îÄ‚îÄ /tools                           # üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã (–æ–±—â–∏–µ –¥–ª—è –≤—Å–µ—Ö –º–∏—Ä–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ init_world.py                # –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–∏—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ cli.py                       # –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ export_chronicles.py         # –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ world_manager.py             # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏—Ä–∞–º–∏
‚îú‚îÄ‚îÄ /world_1                         # üåç –ü–µ—Ä–≤—ã–π –º–∏—Ä
‚îÇ   ‚îú‚îÄ‚îÄ config.yaml                  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∏—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ people_params.json           # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ location_params.json         # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–æ–∫–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ continents.json              # –ö–æ–Ω—Ç–∏–Ω–µ–Ω—Ç—ã –∏ –∏—Ö –æ–ø–∏—Å–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ professions.json             # –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏ –∏ –∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ creatures.json               # –°—É—â–µ—Å—Ç–≤–∞, –∂–∏–≤–æ—Ç–Ω—ã–µ, —Ä–∞—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ world_description.md         # –û–ø–∏—Å–∞–Ω–∏–µ –º–∏—Ä–∞ –∏ —Å–µ—Ç—Ç–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ world_rules.json             # –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –º–∏—Ä–∞ (~10)
‚îÇ   ‚îú‚îÄ‚îÄ /data
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ /continents
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ /aethermoor          # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ meta.yaml        # –ö–ª–∏–º–∞—Ç, –∫—É–ª—å—Ç—É—Ä–∞, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ /regions
‚îÇ   ‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ /northern_reaches
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ meta.yaml
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ /locations
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ       ‚îú‚îÄ‚îÄ /irongate_city
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ state.yaml      # –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ people.json     # –ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –ª–æ–∫–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ events_queue.json # –°–æ–±—ã—Ç–∏—è –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ relationships.json # –°–≤—è–∑–∏ –º–µ–∂–¥—É NPC
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ /logs
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ day_0432.md
‚îÇ   ‚îÇ   ‚îÇ           ‚îÇ       ‚îî‚îÄ‚îÄ /mistwood_village
‚îÇ   ‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ /southern_plains
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ /chronicles              # –•—Ä–æ–Ω–∏–∫–∏ –º–∏—Ä–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ global_timeline.md   # –ì–ª–∞–≤–Ω–∞—è —Ö—Ä–æ–Ω–∏–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ /by_year
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ /by_region
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ /templates               # –®–∞–±–ª–æ–Ω—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ /cache                   # –ö—ç—à –¥–ª—è embeddings –∏ –ø—Ä–æ–º–ø—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ /exports                     # –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ /world_2                         # üåç –í—Ç–æ—Ä–æ–π –º–∏—Ä (–ø—Ä–∏–º–µ—Ä)
‚îÇ   ‚îú‚îÄ‚îÄ config.yaml                  # –°–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ people_params.json           # –°–≤–æ–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ location_params.json         # –°–≤–æ–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–æ–∫–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ continents.json              # –°–≤–æ–∏ –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ professions.json             # –°–≤–æ–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ creatures.json               # –°–≤–æ–∏ —Å—É—â–µ—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ world_description.md         # –°–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–∏—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ world_rules.json             # –°–≤–æ–∏ –ø—Ä–∞–≤–∏–ª–∞
‚îÇ   ‚îî‚îÄ‚îÄ /data
‚îÇ       ‚îî‚îÄ‚îÄ ...                      # –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îî‚îÄ‚îÄ requirements.txt                 # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
```

### –†–∞–±–æ—Ç–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –º–∏—Ä–∞–º–∏
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–∏—Ä–∞
python tools/init_world.py --world world_3 --name "Sci-Fi Universe"

# –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∏—Ä–∞
python engine/world_engine.py --world world_1 --days 30

# –≠–∫—Å–ø–æ—Ä—Ç —Ö—Ä–æ–Ω–∏–∫ –º–∏—Ä–∞
python tools/export_chronicles.py --world world_1 --format markdown
```

## 3. –°–•–ï–ú–´ –î–ê–ù–ù–´–•

### config.yaml - –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∏—Ä–∞
```yaml
world:
  name: "Aethermoor Chronicles"
  start_day: 1
  current_day: 432
  time_scale: "1_day"  # 1 —Ç–∏–∫ = 1 –¥–µ–Ω—å
  tick_frequency: 1    # –ß–∞—Å—Ç–æ—Ç–∞ —Ç–∏–∫–æ–≤ (–∫–∞–∂–¥—ã–µ N –¥–Ω–µ–π)
  
simulation:
  max_events_per_location_per_day: 3
  population_event_multiplier: 0.001  # –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏—è –Ω–∞ –¥—É—à—É –Ω–∞—Å–µ–ª–µ–Ω–∏—è
  inter_location_delay: 1  # –¥–Ω–∏ –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –º–µ–∂–¥—É –ª–æ–∫–∞—Ü–∏—è–º–∏
  
  # üéØ –ú–ê–°–®–¢–ê–ë–ò–†–£–ï–ú–û–°–¢–¨ (10-1000 —Å—É—â–µ—Å—Ç–≤)
  character_limits:
    max_active_characters: 100      # –ú–∞–∫—Å–∏–º—É–º –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
    max_background_characters: 500  # –ú–∞–∫—Å–∏–º—É–º —Ñ–æ–Ω–æ–≤—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
    max_dormant_characters: 1000    # –ú–∞–∫—Å–∏–º—É–º —Å–ø—è—â–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
  
  batch_processing:
    background_update_frequency: 7   # –û–±–Ω–æ–≤–ª—è—Ç—å —Ñ–æ–Ω–æ–≤—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Ä–∞–∑ –≤ N –¥–Ω–µ–π
    dormant_update_frequency: 30     # –û–±–Ω–æ–≤–ª—è—Ç—å —Å–ø—è—â–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Ä–∞–∑ –≤ N –¥–Ω–µ–π
    batch_size: 50                   # –†–∞–∑–º–µ—Ä batch –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  
  demographics:
    average_lifespan_years: 70       # –°—Ä–µ–¥–Ω—è—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∂–∏–∑–Ω–∏
    birth_rate_per_1000: 25          # –†–æ–∂–¥–∞–µ–º–æ—Å—Ç—å –Ω–∞ 1000 –∂–∏—Ç–µ–ª–µ–π –≤ –≥–æ–¥
    death_rate_per_1000: 15          # –°–º–µ—Ä—Ç–Ω–æ—Å—Ç—å –Ω–∞ 1000 –∂–∏—Ç–µ–ª–µ–π –≤ –≥–æ–¥
    marriage_age_min: 18             # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –¥–ª—è –±—Ä–∞–∫–∞
    marriage_age_max: 35             # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –¥–ª—è –±—Ä–∞–∫–∞
  
llm:
  provider: "openai"  # openai, anthropic, deepseek, local
  model: "gpt-4o-mini"
  max_tokens: 1000
  temperature: 0.7
  
  # üí∞ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ó–ê–¢–†–ê–¢
  tiered_models:
    critical_tasks: "gpt-4o"         # –î–æ—Ä–æ–≥–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
    standard_tasks: "gpt-4o-mini"    # –î–µ—à–µ–≤–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –∑–∞–¥–∞—á
    simple_tasks: "local"            # –õ–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á
  
processing:
  detail_levels:
    critical: 1.0    # –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
    important: 0.7   # –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π
    background: 0.3  # –¢–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
  
  # üöÄ –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨
  performance:
    lazy_loading: true               # –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
    cache_character_summaries: true  # –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–∞—Ç–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è
    parallel_location_processing: true # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–∫–∞—Ü–∏–π
```

### people_params.json - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ 
```json
{
    "value": "0=lowest, 1=highest; fractional values allowed",
    "vital_stats": [
        {
            "name": "health",
            "desc": "Character‚Äôs health. 0 ‚Äì dead, 1 ‚Äì fully healthy"
        },
        {
            "name": "moral",
            "desc": "Character‚Äôs morale. 0 ‚Äì despair, 1 ‚Äì happiness"
        },
        {
            "name": "wealth",
            "desc": "Character‚Äôs wealth. 0 ‚Äì poor, 1 ‚Äì wealthy"
        },
        {
            "name": "reputation",
            "desc": "Character‚Äôs reputation. 0 ‚Äì bad, 1 ‚Äì good"
        }
    ],
    "traits": [
        {
            "name": "brave",
            "desc": "Willing to face danger or pain without fear"
        },
        {
            "name": "greedy",
            "desc": "Has an excessive desire for wealth or possessions"
        },
        {
            "name": "social",
            "desc": "Enjoys interacting with others and building relationships"
        },
        {
            "name": "ambitious",
            "desc": "Driven by a strong desire to achieve success or power"
        },
        {
            "name": "kidness",
            "desc": "Shows a caring and generous nature toward others"
        }
    ],
    "type_relationship": [
        {
            "name": "spouse",
            "desc": "A partner joined by marriage or committed relationship"
        },
        {
            "name": "rival",
            "desc": "Someone competing for the same goal or position"
        },
        {
            "name": "friend",
            "desc": "A person with whom one shares mutual affection and trust"
        },
        {
            "name": "enemy",
            "desc": "Someone who is actively hostile or opposed"
        },
        {
            "name": "relative",
            "desc": "A person connected by blood or familial ties"
        },
        {
            "name": "parent",
            "desc": "An individual who has begotten or raised a child"
        },
        {
            "name": "child",
            "desc": "A young person born to or raised by a parent"
        },
        {
            "name": "subordinate",
            "desc": "An individual working under the authority of another"
        },
        {
            "name": "boss",
            "desc": "A person with authority to oversee and direct others"
        }
    ]
}
```
### location_params.json - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–æ–∫–∞—Ü–∏–π
```json
{
    "value": "0=lowest, 1=highest; fractional values allowed",
    "resources": [
        {"name": "food", "desc": "Food availability and agricultural capacity"},
        {"name": "materials", "desc": "Raw materials and construction resources"},
        {"name": "wealth", "desc": "Economic prosperity and trade capacity"},
        {"name": "knowledge", "desc": "Education, libraries, and scholarly activity"},
        {"name": "population", "desc": "Number of inhabitants"}
    ],
    "conditions": [
        {"name": "weather", "desc": "Current weather and seasonal patterns"},
        {"name": "mood", "desc": "General mood and satisfaction of population"},
        {"name": "stability", "desc": "Political and social stability"},
        {"name": "health", "desc": "Disease prevention and medical care quality"}
    ],
    "economy": [
        {"name": "primary_trade", "desc": "Main economic activities and specializations"},
        {"name": "trade_routes", "desc": "Connections to other locations for commerce"},
        {"name": "market_conditions", "desc": "Current state of local economy"}
    ],
    "politics": [
        {"name": "ruler", "desc": "Current leader or governing body"},
        {"name": "government_type", "desc": "System of governance"},
        {"name": "current_issues", "desc": "Active political problems or conflicts"}
    ],
    "culture": [
        {"name": "primary_values", "desc": "Core cultural values and beliefs"},
        {"name": "current_trends", "desc": "Popular activities and social movements"},
        {"name": "traditions", "desc": "Long-standing customs and practices"}
    ]
}
```

### continents.json - –ö–æ–Ω—Ç–∏–Ω–µ–Ω—Ç—ã –º–∏—Ä–∞
```json
{
    "continents": [
        {
            "id": "aethermoor",
            "name": "Aethermoor",
            "description": "A mystical continent shrouded in ancient magic and dotted with floating islands",
            "climate": "temperate with magical phenomena",
            "culture_traits": ["mystical", "scholarly", "traditional"],
            "dominant_races": ["humans", "elves", "wizards"],
            "regions": ["northern_reaches", "southern_plains", "central_highlands"]
        },
        {
            "id": "ironlands",
            "name": "Ironlands", 
            "description": "A harsh mountainous continent rich in minerals and forges",
            "climate": "cold and dry",
            "culture_traits": ["industrious", "militant", "honor-bound"],
            "dominant_races": ["dwarves", "humans", "orcs"],
            "regions": ["mountain_kingdoms", "steel_valleys"]
        }
    ]
}
```

### professions.json - –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏ –≤ –º–∏—Ä–µ
```json
{
    "professions": [
        {
            "id": "blacksmith",
            "name": "Blacksmith",
            "description": "Crafts weapons, tools, and metal goods",
            "typical_traits": {"brave": 0.6, "social": 0.4, "ambitious": 0.5},
            "typical_wealth": 0.6,
            "location_types": ["city", "town", "village"],
            "required_resources": ["materials"],
            "profession_category": "crafter"
        },
        {
            "id": "farmer",
            "name": "Farmer",
            "description": "Grows crops and raises livestock",
            "typical_traits": {"brave": 0.4, "social": 0.6, "ambitious": 0.3},
            "typical_wealth": 0.3,
            "location_types": ["village", "town"],
            "required_resources": ["food"],
            "profession_category": "producer"
        },
        {
            "id": "merchant",
            "name": "Merchant",
            "description": "Trades goods between locations",
            "typical_traits": {"brave": 0.5, "social": 0.8, "ambitious": 0.7},
            "typical_wealth": 0.7,
            "location_types": ["city", "town"],
            "required_resources": ["wealth"],
            "profession_category": "trader"
        },
        {
            "id": "guard",
            "name": "Guard",
            "description": "Protects locations and maintains order",
            "typical_traits": {"brave": 0.8, "social": 0.5, "ambitious": 0.4},
            "typical_wealth": 0.4,
            "location_types": ["city", "town", "fortress"],
            "required_resources": [],
            "profession_category": "military"
        },
        {
            "id": "scholar",
            "name": "Scholar",
            "description": "Studies knowledge and teaches others",
            "typical_traits": {"brave": 0.3, "social": 0.6, "ambitious": 0.6},
            "typical_wealth": 0.5,
            "location_types": ["city", "academy"],
            "required_resources": ["knowledge"],
            "profession_category": "intellectual"
        }
    ]
}
```

### creatures.json - –°—É—â–µ—Å—Ç–≤–∞ –≤ –º–∏—Ä–µ
```json
{
    "categories": {
        "intelligent": "–†–∞–∑—É–º–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤–∞ —Å–ø–æ—Å–æ–±–Ω—ã–µ –∫ —Å–ª–æ–∂–Ω—ã–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è–º",
        "animals": "–û–±—ã—á–Ω—ã–µ –∂–∏–≤–æ—Ç–Ω—ã–µ –∏ —Å—É—â–µ—Å—Ç–≤–∞ –±–µ–∑ —Ä–∞–∑–≤–∏—Ç–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞",
        "magical": "–°—É—â–µ—Å—Ç–≤–∞ —Å –º–∞–≥–∏—á–µ—Å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏",
        "undead": "–ù–µ–∂–∏—Ç—å –∏ –¥—É—Ö–∏"
    },
    "creatures": [
        {
            "id": "human",
            "name": "Human",
            "category": "intelligent",
            "description": "The most common intelligent race, adaptable and diverse",
            "typical_lifespan": 70,
            "base_traits": {"brave": 0.5, "social": 0.6, "ambitious": 0.5},
            "can_have_professions": true,
            "population_weight": 1.0
        },
        {
            "id": "elf",
            "name": "Elf", 
            "category": "intelligent",
            "description": "Long-lived magical beings with deep connection to nature",
            "typical_lifespan": 300,
            "base_traits": {"brave": 0.6, "social": 0.4, "ambitious": 0.3},
            "can_have_professions": true,
            "population_weight": 0.3
        },
        {
            "id": "dwarf",
            "name": "Dwarf",
            "category": "intelligent", 
            "description": "Hardy mountain folk known for craftsmanship and mining",
            "typical_lifespan": 150,
            "base_traits": {"brave": 0.7, "social": 0.7, "ambitious": 0.6},
            "can_have_professions": true,
            "population_weight": 0.4
        },
        {
            "id": "wolf",
            "name": "Wolf",
            "category": "animals",
            "description": "Pack hunters roaming forests and plains",
            "typical_lifespan": 12,
            "base_traits": {"brave": 0.8, "social": 0.9, "ambitious": 0.2},
            "can_have_professions": false,
            "population_weight": 0.1
        },
        {
            "id": "dragon",
            "name": "Dragon",
            "category": "magical",
            "description": "Ancient magical beings of immense power",
            "typical_lifespan": 1000,
            "base_traits": {"brave": 0.9, "social": 0.1, "ambitious": 0.9},
            "can_have_professions": false,
            "population_weight": 0.001
        }
    ]
}
```

### world_description.md - –û–ø–∏—Å–∞–Ω–∏–µ –º–∏—Ä–∞
```markdown
# Aethermoor Chronicles - –û–ø–∏—Å–∞–Ω–∏–µ –ú–∏—Ä–∞

## –û–±—â–∏–π –û–±–∑–æ—Ä
–ú–∏—Ä –≠—Ç–µ—Ä–º—É—Ä–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç, –≥–¥–µ –º–∞–≥–∏—è –ø–µ—Ä–µ–ø–ª–µ—Ç–∞–µ—Ç—Å—è —Å –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –∂–∏–∑–Ω—å—é. –î—Ä–µ–≤–Ω–∏–µ —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏–∏ –æ—Å—Ç–∞–≤–∏–ª–∏ —Å–≤–æ–π —Å–ª–µ–¥ –≤ –≤–∏–¥–µ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏ —Ä—É–∏–Ω, –∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–∞ —Å—Ç—Ä–æ—è—Ç —Å–≤–æ–µ –±—É–¥—É—â–µ–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–æ—Ä–≥–æ–≤–ª–∏, —Ä–µ–º–µ—Å–µ–ª –∏ –¥–∏–ø–ª–æ–º–∞—Ç–∏–∏.

## –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ö–æ–Ω—Ç–µ–∫—Å—Ç
–ö–æ–Ω—Ç–∏–Ω–µ–Ω—Ç –≠—Ç–µ—Ä–º—É—Ä —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–≥–∏–æ–Ω–æ–≤:
- **–°–µ–≤–µ—Ä–Ω—ã–µ –ü—Ä–µ–¥–µ–ª—ã**: –°—É—Ä–æ–≤—ã–µ –≥–æ—Ä–Ω—ã–µ –∑–µ–º–ª–∏, –±–æ–≥–∞—Ç—ã–µ –º–µ—Ç–∞–ª–ª–∞–º–∏
- **–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –†–∞–≤–Ω–∏–Ω—ã**: –ü–ª–æ–¥–æ—Ä–æ–¥–Ω—ã–µ –∑–µ–º–ª–∏ —Å –∫—Ä—É–ø–Ω—ã–º–∏ –≥–æ—Ä–æ–¥–∞–º–∏
- **–Æ–∂–Ω—ã–µ –î–æ–ª–∏–Ω—ã**: –ú—è–≥–∫–∏–π –∫–ª–∏–º–∞—Ç, —Ü–µ–Ω—Ç—Ä —Ç–æ—Ä–≥–æ–≤–ª–∏ –∏ –∫—É–ª—å—Ç—É—Ä—ã

## –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –°—Ç—Ä—É–∫—Ç—É—Ä–∞
- **–ü—Ä–∞–≤—è—â–∏–µ –∫–ª–∞—Å—Å—ã**: –õ–æ—Ä–¥—ã –∏ –º–∞–≥–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç –∫—Ä—É–ø–Ω—ã–º–∏ –≥–æ—Ä–æ–¥–∞–º–∏
- **–†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫–∏**: –û—Å–Ω–æ–≤–∞ —ç–∫–æ–Ω–æ–º–∏–∫–∏, –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ –≥–∏–ª—å–¥–∏–∏  
- **–¢–æ—Ä–≥–æ–≤—Ü—ã**: –°–≤—è–∑—ã–≤–∞—é—Ç —Ä–µ–≥–∏–æ–Ω—ã —Ç–æ—Ä–≥–æ–≤—ã–º–∏ –ø—É—Ç—è–º–∏
- **–ö—Ä–µ—Å—Ç—å—è–Ω–µ**: –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –Ω–∞—Å–µ–ª–µ–Ω–∏—è, –∑–∞–Ω—è—Ç–æ–µ —Å–µ–ª—å—Å–∫–∏–º —Ö–æ–∑—è–π—Å—Ç–≤–æ–º

## –ú–∞–≥–∏—á–µ—Å–∫–∞—è –°–∏—Å—Ç–µ–º–∞
–ú–∞–≥–∏—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –º–∏—Ä–µ, –Ω–æ –Ω–µ –¥–æ–º–∏–Ω–∏—Ä—É–µ—Ç. –û–Ω–∞ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤:
- –ó–∞—á–∞—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–∞—Ö –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö
- –ú–∞–≥–∏—á–µ—Å–∫–∏—Ö —Å—É—â–µ—Å—Ç–≤–∞—Ö –∏ —è–≤–ª–µ–Ω–∏—è—Ö
- –†–µ–¥–∫–∏—Ö –ª—é–¥—è—Ö —Å –≤—Ä–æ–∂–¥–µ–Ω–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏

## –ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –°–∏—Ç—É–∞—Ü–∏—è
–ú–∏—Ä –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Ö—Ä—É–ø–∫–æ–≥–æ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏—è –º–µ–∂–¥—É:
- –ì–æ—Ä–æ–¥–∞–º–∏-–≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–∞–º–∏ —Å–æ —Å–≤–æ–∏–º–∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º–∏
- –¢–æ—Ä–≥–æ–≤—ã–º–∏ –≥–∏–ª—å–¥–∏—è–º–∏, –≤–ª–∏—è—é—â–∏–º–∏ –Ω–∞ —ç–∫–æ–Ω–æ–º–∏–∫—É
- –î—Ä–µ–≤–Ω–∏–º–∏ –º–∞–≥–∏—á–µ—Å–∫–∏–º–∏ –æ—Ä–¥–µ–Ω–∞–º–∏
- –†–∞—Å—Ç—É—â–µ–π —É–≥—Ä–æ–∑–æ–π –æ—Ç –¥–∏–∫–∏—Ö –∑–µ–º–µ–ª—å

## –û—Å–Ω–æ–≤–Ω—ã–µ –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã
- –¢–æ—Ä–≥–æ–≤—ã–µ —Å–ø–æ—Ä—ã –º–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏
- –ù–∞–±–µ–≥–∏ –≤–∞—Ä–≤–∞—Ä–æ–≤ —Å —Å–µ–≤–µ—Ä–∞
- –ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Ç—Ä–∏–≥–∏ –∑–Ω–∞—Ç–∏
- –ü—Ä–æ—Ç–∏–≤–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞–≥–∏–∏ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
```

### world_rules.json - –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –º–∏—Ä–∞
```json
{
    "rules": [
        {
            "id": "mortality",
            "name": "–ó–∞–∫–æ–Ω –°–º–µ—Ä—Ç–Ω–æ—Å—Ç–∏",
            "description": "–í—Å–µ —Ä–∞–∑—É–º–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤–∞ —Å–º–µ—Ä—Ç–Ω—ã –∏ —Å—Ç–∞—Ä–µ—é—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º"
        },
        {
            "id": "magic_rarity", 
            "name": "–†–µ–¥–∫–æ—Å—Ç—å –ú–∞–≥–∏–∏",
            "description": "–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —É –º–µ–Ω–µ–µ —á–µ–º 5% –Ω–∞—Å–µ–ª–µ–Ω–∏—è"
        },
        {
            "id": "economic_balance",
            "name": "–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–µ –†–∞–≤–Ω–æ–≤–µ—Å–∏–µ", 
            "description": "–†–µ—Å—É—Ä—Å—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã, —Ç–æ—Ä–≥–æ–≤–ª—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –¥–ª—è –ø—Ä–æ—Ü–≤–µ—Ç–∞–Ω–∏—è"
        },
        {
            "id": "social_mobility",
            "name": "–°–æ—Ü–∏–∞–ª—å–Ω–∞—è –ú–æ–±–∏–ª—å–Ω–æ—Å—Ç—å",
            "description": "–ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤–æ–π —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ —Ç—Ä—É–¥, —É–¥–∞—á—É –∏–ª–∏ –≤—ã–¥–∞—é—â–∏–µ—Å—è –ø–æ—Å—Ç—É–ø–∫–∏"
        },
        {
            "id": "consequence_system",
            "name": "–°–∏—Å—Ç–µ–º–∞ –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π",
            "description": "–ö–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–º–µ–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ –º–∏—Ä"
        },
        {
            "id": "relationship_dynamics",
            "name": "–î–∏–Ω–∞–º–∏–∫–∞ –û—Ç–Ω–æ—à–µ–Ω–∏–π",
            "description": "–û—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ —Ä–∞–∑–≤–∏–≤–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π"
        },
        {
            "id": "environmental_influence",
            "name": "–í–ª–∏—è–Ω–∏–µ –û–∫—Ä—É–∂–µ–Ω–∏—è",
            "description": "–ü–æ–≥–æ–¥–∞, —Å–µ–∑–æ–Ω—ã –∏ –ø—Ä–∏—Ä–æ–¥–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤–ª–∏—è—é—Ç –Ω–∞ –∂–∏–∑–Ω—å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π"
        },
        {
            "id": "cultural_diversity",
            "name": "–ö—É–ª—å—Ç—É—Ä–Ω–æ–µ –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ",
            "description": "–†–∞–∑–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã –∏–º–µ—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ç—Ä–∞–¥–∏—Ü–∏–∏ –∏ —Ü–µ–Ω–Ω–æ—Å—Ç–∏"
        },
        {
            "id": "information_flow",
            "name": "–ü–æ—Ç–æ–∫ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏",
            "description": "–ù–æ–≤–æ—Å—Ç–∏ –∏ —Å–ª—É—Ö–∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é"
        },
        {
            "id": "generational_change",
            "name": "–°–º–µ–Ω–∞ –ü–æ–∫–æ–ª–µ–Ω–∏–π",
            "description": "–ú–æ–ª–æ–¥–æ–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —É—Å—Ç–æ—è–≤—à–∏–µ—Å—è —Ç—Ä–∞–¥–∏—Ü–∏–∏"
        }
    ]
}
```

### Person Schema (people.json) - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞ —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
```json
{
  "id": "npc_irongate_0042",
  "name": "–≠–ª–∞—Ä–∞ –ö—É–∑–Ω–µ—Ü–æ–≤–∞", 
  "age": 28,
  "location": "irongate_city",
  "creature_type": "human",
  "profession": "blacksmith",
  "character_state": "active",  # active/background/dormant
  "last_update_day": 432,
  
  "traits": {
    "brave": 0.8,
    "greedy": 0.2,
    "social": 0.6,
    "ambitious": 0.7
  },
  "vital_stats": {
    "health": 0.9,
    "wealth": 0.4,
    "reputation": 0.6
  },
  "relationships": {
    "npc_irongate_0031": {"type": "spouse", "strength": 0.9},
    "npc_irongate_0015": {"type": "rival", "strength": -0.4}
  },
  "goals": [
    {"type": "expand_business", "priority": 0.8, "progress": 0.3},
    {"type": "have_children", "priority": 0.6, "progress": 0.0}
  ],
  "history": [
    {"day": 420, "event": "married", "target": "npc_irongate_0031"},
    {"day": 430, "event": "won_contract", "value": "city_guard_weapons"}
  ],
  "chronicle_importance": 0.4  # –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ —Ö—Ä–æ–Ω–∏–∫–∏
}
```

## 3.1. –†–ê–ó–î–ï–õ–ï–ù–ò–ï –ó–ê–î–ê–ß: –ö–û–î vs LLM

### ü§ñ –ß–µ—Ä–µ–∑ –ö–û–î (–±—ã—Å—Ç—Ä–æ, –¥–µ—à–µ–≤–æ, –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ):

#### –í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏
- –ü–æ–¥—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫ –ø–æ–ø—É–ª—è—Ü–∏–∏ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∏—Å–ª–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–∑–¥–æ—Ä–æ–≤—å–µ, –±–æ–≥–∞—Ç—Å—Ç–≤–æ)
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –∏ –≤—Ä–µ–º–µ–Ω–∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª —Å—Ç–∞—Ä–µ–Ω–∏—è –∏ —Å–º–µ—Ä—Ç–Ω–æ—Å—Ç–∏
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –ø–æ —É—Ä–æ–≤–Ω—è–º –≤–∞–∂–Ω–æ—Å—Ç–∏

#### –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –ø–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π —Å –ª–æ–∫–∞—Ü–∏—è–º–∏
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (active/background/dormant)
- Batch-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä—É–ø–ø –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π

#### –ü—Ä–æ—Å—Ç–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–º–µ–Ω –ø–æ —à–∞–±–ª–æ–Ω–∞–º –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º
- –ë–∞–∑–æ–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
- –°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –ø–æ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Ç–∞–±–ª–∏—Ü–∞–º
- –ü—Ä–æ—Å—Ç—ã–µ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã
- –ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π

### üé≠ –ß–µ—Ä–µ–∑ LLM (—Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –Ω–∞—Ä—Ä–∞—Ç–∏–≤, —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞):

#### –¢–≤–æ—Ä—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π –∏ –∏—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π
- –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ª–∏—á–Ω–æ—Å—Ç–µ–π –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- –û–ø–∏—Å–∞–Ω–∏—è –ª–æ–∫–∞—Ü–∏–π, –∫—É–ª—å—Ç—É—Ä –∏ —Ç—Ä–∞–¥–∏—Ü–∏–π
- –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ö—Ä–æ–Ω–∏–∫ –∏ –ø–æ–≤–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–π
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

#### –ù–∞—Ä—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- –î–∏–∞–ª–æ–≥–∏ –º–µ–∂–¥—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏
- –ú–æ—Ç–∏–≤–∞—Ü–∏–∏ –∏ —Ü–µ–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- –ö—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–≥–∏–æ–Ω–æ–≤
- –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –∏ –∏—Ö –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è
- –°–ª—É—Ö–∏ –∏ –Ω–æ–≤–æ—Å—Ç–∏ –º–µ–∂–¥—É –ª–æ–∫–∞—Ü–∏—è–º–∏

#### –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ü–µ–ø–æ—á–µ–∫ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–Ω—Ç—Ä–∏–≥
- –†–∞–∑–≤–∏—Ç–∏–µ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö —Å—é–∂–µ—Ç–Ω—ã—Ö –ª–∏–Ω–∏–π
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–∏—Ä–∞

### üéØ –ì–∏–±—Ä–∏–¥–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–∫–æ–¥ + LLM):
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞**: –ö–æ–¥ –∑–∞–¥–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Üí LLM —Å–æ–∑–¥–∞–µ—Ç –ª–∏—á–Ω–æ—Å—Ç—å
- **–°–æ–±—ã—Ç–∏—è**: –ö–æ–¥ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å ‚Üí LLM —Å–æ–∑–¥–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ
- **–û—Ç–Ω–æ—à–µ–Ω–∏—è**: –ö–æ–¥ –≤—ã—á–∏—Å–ª—è–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å ‚Üí LLM –æ–±—ä—è—Å–Ω—è–µ—Ç —Ä–∞–∑–≤–∏—Ç–∏–µ
- **–≠–∫–æ–Ω–æ–º–∏–∫–∞**: –ö–æ–¥ —Å—á–∏—Ç–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã ‚Üí LLM –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è

## 3.2. –°–ò–°–¢–ï–ú–ê –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø –ü–ï–†–°–û–ù–ê–ñ–ï–ô

### –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
```python
CHARACTER_STATES = {
    "active": {
        "description": "–ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥—ã–π —Ç–∏–∫",
        "update_frequency": 1,  # –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
        "max_characters": 100,
        "llm_usage": "high",
        "criteria": ["–≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ª–æ–∫–∞—Ü–∏—è—Ö", "–≤—ã—Å–æ–∫–∞—è –≤–∞–∂–Ω–æ—Å—Ç—å", "–∞–∫—Ç–∏–≤–Ω—ã–µ —Ü–µ–ª–∏"]
    },
    "background": {
        "description": "–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞",
        "update_frequency": 7,  # —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é
        "max_characters": 500,
        "llm_usage": "medium", 
        "criteria": ["–≤ –≤–∞–∂–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏—è—Ö", "—Å—Ä–µ–¥–Ω—è—è –≤–∞–∂–Ω–æ—Å—Ç—å", "—Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è"]
    },
    "dormant": {
        "description": "–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞",
        "update_frequency": 30,  # —Ä–∞–∑ –≤ –º–µ—Å—è—Ü
        "max_characters": 1000,
        "llm_usage": "low",
        "criteria": ["–≤ —Ñ–æ–Ω–æ–≤—ã—Ö –ª–æ–∫–∞—Ü–∏—è—Ö", "–Ω–∏–∑–∫–∞—è –≤–∞–∂–Ω–æ—Å—Ç—å", "–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–æ–ª–∏"]
    }
}
```

### –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
```python
def update_character_states(world_state):
    """–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º"""
    all_characters = load_all_characters()
    
    # –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏
    characters_by_importance = sorted(all_characters, 
                                    key=calculate_character_importance, 
                                    reverse=True)
    
    # –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º
    active_count = world_state.config.character_limits.max_active_characters
    background_count = world_state.config.character_limits.max_background_characters
    
    for i, char in enumerate(characters_by_importance):
        if i < active_count:
            char.state = "active"
        elif i < active_count + background_count:
            char.state = "background"
        else:
            char.state = "dormant"
            
def calculate_character_importance(character):
    """–í—ã—á–∏—Å–ª—è–µ—Ç –≤–∞–∂–Ω–æ—Å—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è"""
    importance = character.chronicle_importance
    
    # –ë–æ–Ω—É—Å—ã –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
    if character.goals and any(g.progress > 0 for g in character.goals):
        importance += 0.2
        
    # –ë–æ–Ω—É—Å—ã –∑–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏—è
    if character.relationships:
        importance += len(character.relationships) * 0.05
        
    # –ë–æ–Ω—É—Å—ã –∑–∞ –ª–æ–∫–∞—Ü–∏—é
    location = get_location(character.location)
    if location.detail_level == "critical":
        importance += 0.3
    elif location.detail_level == "important":
        importance += 0.1
        
    return min(1.0, importance)
```

### Batch-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
```python
class CharacterBatchProcessor:
    def __init__(self, batch_size=50):
        self.batch_size = batch_size
    
    def process_background_characters(self, characters):
        """–ì—Ä—É–ø–ø–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π"""
        batches = [characters[i:i+self.batch_size] 
                  for i in range(0, len(characters), self.batch_size)]
        
        for batch in batches:
            # –ì—Ä—É–ø–ø–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–µ–∑ LLM
            self.apply_aging(batch)
            self.update_basic_stats(batch)
            self.process_simple_goals(batch)
    
    def apply_aging(self, characters):
        """–ü—Ä–∏–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ä–µ–Ω–∏–µ –∫–æ –≤—Å–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º –≤ batch"""
        for char in characters:
            days_passed = current_day - char.last_update_day
            # –ü—Ä–æ—Å—Ç–æ–µ —Å—Ç–∞—Ä–µ–Ω–∏–µ –±–µ–∑ LLM
            if days_passed >= 365:  # –ü—Ä–æ—à–µ–ª –≥–æ–¥
                char.age += 1
                char.health *= 0.99  # –ù–µ–±–æ–ª—å—à–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –∑–¥–æ—Ä–æ–≤—å—è
    
    def process_dormant_characters(self, characters):
        """–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø—è—â–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π"""
        # –¢–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è: —Å–º–µ—Ä—Ç—å –æ—Ç —Å—Ç–∞—Ä–æ—Å—Ç–∏
        for char in characters:
            if char.age > char.creature_type.typical_lifespan * 0.9:
                if random.random() < 0.01:  # 1% —à–∞–Ω—Å —Å–º–µ—Ä—Ç–∏
                    self.schedule_death_event(char)
```

### Event Schema (events_queue.json)
```json
{
  "events": [
    {
      "id": "evt_433_001",
      "day": 433,
      "type": "travel",
      "actor": "npc_irongate_0042",
      "action": "travel_to",
      "target": "mistwood_village",
      "reason": "deliver_weapons",
      "duration": 2,
      "consequences": ["trade_relationship", "reputation_gain"],
      "priority": "important"
    },
    {
      "id": "evt_433_002", 
      "day": 433,
      "type": "social",
      "actor": "npc_irongate_0015",
      "action": "spread_rumors",
      "target": "npc_irongate_0042",
      "reason": "business_rivalry",
      "consequences": ["reputation_loss", "potential_conflict"]
    }
  ]
}
```

### Location State (state.yaml)
```yaml
name: "Irongate City"
type: "major_city"
population: 8500
detail_level: "critical"  # critical/important/background

resources:
  food: 0.8      # 0.0 = –≥–æ–ª–æ–¥, 1.0 = –∏–∑–æ–±–∏–ª–∏–µ
  materials: 0.9
  wealth: 0.6
  knowledge: 0.5

conditions:
  weather: "autumn_rains"
  mood: 0.7      # –û–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ
  stability: 0.8 # –ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
  health: 0.9    # –≠–ø–∏–¥–µ–º–∏–∏, –º–µ–¥–∏—Ü–∏–Ω–∞

economy:
  primary_trade: ["metalworking", "weapon_crafting"]
  trade_routes: ["mistwood_village", "goldenhaven_port"]
  market_conditions: "growing"

politics:
  ruler: "npc_irongate_0001"  # –õ–æ—Ä–¥ –ì–∞—Ä—Ä–µ—Ç
  government_type: "feudal_city_state"
  current_issues: ["tax_collection", "bandit_raids"]

culture:
  primary_values: ["craftsmanship", "honor", "tradition"]
  current_trends: ["military_preparation", "trade_expansion"]
  
recent_events:
  - "Major weapons order from neighboring cities"
  - "Rumors of increased bandit activity on trade routes"
  - "Harvest festival preparations beginning"
```

## 4. –°–ò–°–¢–ï–ú–ê –°–û–ë–´–¢–ò–ô –ò –ü–†–ò–û–†–ò–¢–ï–¢–û–í

### –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π
```python
EVENT_TYPES = {
    # –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
    "birth": {"chronicle_chance": 0.1, "local_impact": 0.2},
    "death": {"chronicle_chance": 0.8, "local_impact": 0.6}, 
    "marriage": {"chronicle_chance": 0.3, "local_impact": 0.3},
    "profession_change": {"chronicle_chance": 0.2, "local_impact": 0.3},
    
    # –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è  
    "trade_deal": {"chronicle_chance": 0.4, "local_impact": 0.5},
    "conflict": {"chronicle_chance": 0.7, "local_impact": 0.8},
    "festival": {"chronicle_chance": 0.5, "local_impact": 0.6},
    
    # –ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
    "ruler_change": {"chronicle_chance": 1.0, "local_impact": 0.9},
    "law_change": {"chronicle_chance": 0.8, "local_impact": 0.7},
    "alliance": {"chronicle_chance": 0.9, "local_impact": 0.8},
    
    # –ü—Ä–∏—Ä–æ–¥–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
    "disaster": {"chronicle_chance": 0.9, "local_impact": 1.0},
    "resource_discovery": {"chronicle_chance": 0.7, "local_impact": 0.8},
    "epidemic": {"chronicle_chance": 0.9, "local_impact": 0.9}
}
```

### –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
```python
def calculate_chronicle_priority(event, location, global_state):
    base_priority = EVENT_TYPES[event["type"]]["chronicle_chance"]
    
    # –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
    actor_importance = get_character_importance(event["actor"])
    location_importance = location["detail_level_multiplier"]
    global_relevance = check_global_relevance(event, global_state)
    
    final_priority = base_priority * actor_importance * location_importance * global_relevance
    return min(1.0, final_priority)
```

## 5. LLM –°–ò–°–¢–ï–ú–ê –ò –ü–†–û–ú–ü–¢–´

### –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã

#### –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ–±—ã—Ç–∏–π –ª–æ–∫–∞—Ü–∏–∏
```python
LOCATION_EVENT_PROMPT = """
–¢—ã —É–ø—Ä–∞–≤–ª—è–µ—à—å —Å–∏–º—É–ª—è—Ü–∏–µ–π –ª–æ–∫–∞—Ü–∏–∏ "{location_name}" (–Ω–∞—Å–µ–ª–µ–Ω–∏–µ: {population}).

–¢–ï–ö–£–©–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø:
{current_state}

–ê–ö–¢–ò–í–ù–´–ï –ü–ï–†–°–û–ù–ê–ñ–ò (—Ç–æ–ø-5 –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏):
{top_characters}

–í–ù–ï–®–ù–ò–ï –§–ê–ö–¢–û–†–´:
- –ü–æ–≥–æ–¥–∞: {weather}  
- –¢–æ—Ä–≥–æ–≤—ã–µ —Å–≤—è–∑–∏: {trade_status}
- –ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Å—Ç–∞–Ω–æ–≤–∫–∞: {politics}

–°–û–ë–´–¢–ò–Ø –í–ß–ï–†–ê:
{yesterday_events}

–ó–ê–î–ê–ß–ê: –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π 2-4 –ª–æ–≥–∏—á–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è ({current_day}), —É—á–∏—Ç—ã–≤–∞—è:
- –•–∞—Ä–∞–∫—Ç–µ—Ä—ã –∏ —Ü–µ–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- –°–æ—Ü–∏–∞–ª—å–Ω–æ-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫—É—é —Å–∏—Ç—É–∞—Ü–∏—é
- –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –≤—á–µ—Ä–∞—à–Ω–∏—Ö —Å–æ–±—ã—Ç–∏–π
- –°–µ–∑–æ–Ω–Ω–æ—Å—Ç—å –∏ –≤–Ω–µ—à–Ω–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã

–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê (—Å—Ç—Ä–æ–≥–∏–π JSON):
{
  "events": [
    {
      "type": "event_type",
      "actor": "character_id", 
      "action": "—á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç",
      "target": "—Ü–µ–ª—å/–æ–±—ä–µ–∫—Ç", 
      "reason": "–º–æ—Ç–∏–≤–∞—Ü–∏—è",
      "consequences": ["–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ1", "–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ2"]
    }
  ]
}

–í–ê–ñ–ù–û: –°–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏ –¥–ª—è –¥–∞–Ω–Ω–æ–π –∫—É–ª—å—Ç—É—Ä—ã –∏ —ç–ø–æ—Ö–∏.
"""

#### –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ö—Ä–æ–Ω–∏–∫
```python
CHRONICLE_PROMPT = """
–¢—ã - –ª–µ—Ç–æ–ø–∏—Å–µ—Ü, —Å–æ–∑–¥–∞—é—â–∏–π –∫—Ä–∞—Ç–∫–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –∑–∞–ø–∏—Å–∏.

–°–û–ë–´–¢–ò–Ø –î–ù–Ø {day} –ü–û –í–°–ï–ú –õ–û–ö–ê–¶–ò–Ø–ú:
{all_events}

–ó–ê–î–ê–ß–ê: –í—ã–±–µ—Ä–∏ 3-5 —Å–∞–º—ã—Ö –∑–Ω–∞—á–∏–º—ã—Ö —Å–æ–±—ã—Ç–∏–π –∏ –∑–∞–ø–∏—à–∏ –∫–∞–∫ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫—É—é —Ö—Ä–æ–Ω–∏–∫—É.

–ö–†–ò–¢–ï–†–ò–ò –í–ê–ñ–ù–û–°–¢–ò:
- –°–º–µ—Ä—Ç–∏/—Ä–æ–∂–¥–µ–Ω–∏—è –≤–∞–∂–Ω—ã—Ö –ª—é–¥–µ–π
- –ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è  
- –ö—Ä—É–ø–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–¥–µ–ª–∫–∏
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏ –∞–ª—å—è–Ω—Å—ã
- –°—Ç–∏—Ö–∏–π–Ω—ã–µ –±–µ–¥—Å—Ç–≤–∏—è
- –ö—É–ª—å—Ç—É—Ä–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

–§–û–†–ú–ê–¢: –ö—Ä–∞—Ç–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ —Å—Ç–∏–ª–µ —Å—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤—ã—Ö —Ö—Ä–æ–Ω–∏–∫.

–ü–†–ò–ú–ï–†:
"–î–µ–Ω—å 432-–π –≥–æ–¥–∞ –ñ–µ–ª–µ–∑–Ω–æ–≥–æ –ö–æ–ª—å—Ü–∞: –í –ñ–µ–ª–µ–∑–Ω—ã—Ö –í–æ—Ä–æ—Ç–∞—Ö —Å–∫–æ–Ω—á–∞–ª—Å—è –º–∞—Å—Ç–µ—Ä-–∫—É–∑–Ω–µ—Ü –¢–æ—Ä–≥—Ä–∏–º –æ—Ç —Å—Ç–∞—Ä–æ—Å—Ç–∏. –ö—É–ø–µ—Ü –≠–¥–≤–∞—Ä–¥ –∏–∑ –ó–æ–ª–æ—Ç–æ–π –ì–∞–≤–∞–Ω–∏ –∑–∞–∫–ª—é—á–∏–ª –∫—Ä—É–ø–Ω—É—é —Å–¥–µ–ª–∫—É –Ω–∞ –ø–æ—Å—Ç–∞–≤–∫—É –æ—Ä—É–∂–∏—è. –í –¢—É–º–∞–Ω–Ω–æ–º –õ–µ—Å—É –æ—Ö–æ—Ç–Ω–∏–∫–∏ —Å–æ–æ–±—â–∏–ª–∏ –æ —Å—Ç—Ä–∞–Ω–Ω—ã—Ö —Å–ª–µ–¥–∞—Ö –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –∑–≤–µ—Ä—è."

–ù–ï –í–ö–õ–Æ–ß–ê–ô: –º–µ–ª–∫–∏–µ –±—ã—Ç–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è, —Ä—É—Ç–∏–Ω–Ω—É—é —Ç–æ—Ä–≥–æ–≤–ª—é, –æ–±—ã—á–Ω—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã.
"""

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞  
```python
CHARACTER_UPDATE_PROMPT = """
–û–±–Ω–æ–≤–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –ø–æ—Å–ª–µ —Å–æ–±—ã—Ç–∏—è.

–ü–ï–†–°–û–ù–ê–ñ:
{character_data}

–°–û–ë–´–¢–ò–ï:
{event_description}

–û–ë–ù–û–í–ò –≤ JSON:
- –≤–æ–∑—Ä–∞—Å—Ç (–µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ –≤—Ä–µ–º—è)
- vital_stats (–∑–¥–æ—Ä–æ–≤—å–µ, –±–æ–≥–∞—Ç—Å—Ç–≤–æ, —Ä–µ–ø—É—Ç–∞—Ü–∏—è)  
- relationships (–Ω–æ–≤—ã–µ —Å–≤—è–∑–∏ –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
- goals (–ø—Ä–æ–≥—Ä–µ—Å—Å –∏–ª–∏ –Ω–æ–≤—ã–µ —Ü–µ–ª–∏)
- –¥–æ–±–∞–≤—å –≤ history

–í–ï–†–ù–ò –¢–û–õ–¨–ö–û –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—è –≤ JSON, –ù–ï –≤–µ—Å—å –ø—Ä–æ—Ñ–∏–ª—å.
"""
```

### –°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤
```python
class PromptCache:
    def __init__(self):
        self.location_embeddings = {}
        self.character_summaries = {}
        
    def get_location_context(self, location_id):
        if location_id not in self.location_embeddings:
            # –°–æ–∑–¥–∞–µ–º —Å–∂–∞—Ç–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏
            self.location_embeddings[location_id] = self.compress_location_data(location_id)
        return self.location_embeddings[location_id]
    
    def compress_location_data(self, location_id):
        # –°–∂–∏–º–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏ –¥–æ –∫–ª—é—á–µ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
        full_data = load_location_state(location_id)
        compressed = {
            "name": full_data["name"],
            "population": full_data["population"],
            "primary_trade": full_data["economy"]["primary_trade"][:2],
            "mood": full_data["conditions"]["mood"],
            "key_issues": full_data["politics"]["current_issues"][:2]
        }
        return compressed
```

## 6. –û–°–ù–û–í–ù–û–ô –¶–ò–ö–õ –°–ò–ú–£–õ–Ø–¶–ò–ò

### world_engine.py
```python
import asyncio
import json
from typing import Dict, List
from llm_manager import LLMManager
from event_processor import EventProcessor
from chronicle_generator import ChronicleGenerator

class WorldEngine:
    def __init__(self, config_path: str):
        self.config = self.load_config(config_path)
        self.llm = LLMManager(self.config["llm"])
        self.event_processor = EventProcessor()
        self.chronicle_gen = ChronicleGenerator(self.llm)
        self.current_day = self.config["world"]["current_day"]
        
    async def run_simulation(self, days: int):
        """–ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª —Å–∏–º—É–ª—è—Ü–∏–∏"""
        for day in range(self.current_day, self.current_day + days):
            print(f"–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–Ω—è {day}...")
            
            # 1. –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ –ª–æ–∫–∞—Ü–∏–∏
            locations = self.load_all_locations()
            all_events = []
            
            # 2. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ª–æ–∫–∞—Ü–∏–∏ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏
            critical_locations = [loc for loc in locations if loc["detail_level"] == "critical"]
            important_locations = [loc for loc in locations if loc["detail_level"] == "important"] 
            background_locations = [loc for loc in locations if loc["detail_level"] == "background"]
            
            # 3. –î–µ—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ª–æ–∫–∞—Ü–∏–π
            for location in critical_locations:
                events = await self.process_location_detailed(location, day)
                all_events.extend(events)
                
            # 4. –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–∂–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–π
            for location in important_locations:
                events = await self.process_location_standard(location, day)
                all_events.extend(events)
                
            # 5. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –ª–æ–∫–∞—Ü–∏–π
            for location in background_locations:
                events = self.process_location_minimal(location, day)
                all_events.extend(events)
            
            # 6. –ú–µ–∂–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
            inter_events = self.process_inter_location_events(all_events)
            all_events.extend(inter_events)
            
            # 7. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ö—Ä–æ–Ω–∏–∫
            chronicles = await self.chronicle_gen.generate_daily_chronicle(all_events, day)
            self.save_chronicles(chronicles, day)
            
            # 8. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            self.update_global_state(day, all_events)
            
            print(f"–î–µ–Ω—å {day} –∑–∞–≤–µ—Ä—à–µ–Ω. –°–æ–±—ã—Ç–∏—è: {len(all_events)}")
            
    async def process_location_detailed(self, location: Dict, day: int) -> List[Dict]:
        """–î–µ—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ª–æ–∫–∞—Ü–∏–π"""
        # 1. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—á–µ—Ä–µ–¥—å —Å–æ–±—ã—Ç–∏–π
        queued_events = self.event_processor.process_queue(location, day)
        
        # 2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ LLM
        context = self.build_location_context(location, day)
        new_events = await self.llm.generate_location_events(context)
        
        # 3. –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª–∞  
        valid_events = self.validate_events(new_events, location)
        
        # 4. –û–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
        await self.update_characters(location, valid_events)
        
        # 5. –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏
        self.update_location_state(location, valid_events)
        
        all_events = queued_events + valid_events
        
        # 6. –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥
        self.save_location_log(location, day, all_events)
        
        return all_events
        
    async def process_location_standard(self, location: Dict, day: int) -> List[Dict]:
        """–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–∂–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–π"""
        # –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è - –±–µ–∑ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤
        queued_events = self.event_processor.process_queue(location, day)
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –º–µ–Ω—å—à–µ —Å–æ–±—ã—Ç–∏–π
        context = self.build_simplified_context(location, day)
        new_events = await self.llm.generate_location_events(context, max_events=2)
        
        valid_events = self.validate_events(new_events, location)
        self.update_location_state(location, valid_events)
        
        return queued_events + valid_events
        
    def process_location_minimal(self, location: Dict, day: int) -> List[Dict]:
        """–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –ª–æ–∫–∞—Ü–∏–π"""
        # –¢–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏—è –∏–∑ –æ—á–µ—Ä–µ–¥–∏ + —Å–ª—É—á–∞–π–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è
        queued_events = self.event_processor.process_queue(location, day)
        
        # –ü—Ä–æ—Å—Ç–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑ LLM
        random_events = self.generate_random_key_events(location, day)
        
        return queued_events + random_events
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
```python
class EventValidator:
    def __init__(self, rules_path: str):
        self.rules = self.load_rules(rules_path)
        
    def validate_events(self, events: List[Dict], location: Dict) -> List[Dict]:
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å"""
        valid_events = []
        
        for event in events:
            if self.check_event_rules(event, location):
                if self.check_character_exists(event["actor"]):
                    if self.check_physics_rules(event):
                        valid_events.append(event)
                    else:
                        print(f"–û—Ç–∫–ª–æ–Ω–µ–Ω–æ –ø–æ —Ñ–∏–∑–∏–∫–µ: {event}")
                else:
                    print(f"–ü–µ—Ä—Å–æ–Ω–∞–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω: {event['actor']}")
            else:
                print(f"–ù–∞—Ä—É—à–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞: {event}")
                
        return valid_events
        
    def check_event_rules(self, event: Dict, location: Dict) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª –¥–ª—è —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è"""
        event_type = event["type"]
        
        if event_type == "death":
            # –ù–µ –±–æ–ª—å—à–µ 1 —Å–º–µ—Ä—Ç–∏ –≤–∞–∂–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –≤ –Ω–µ–¥–µ–ª—é
            return self.check_death_frequency(event["actor"], location)
            
        elif event_type == "travel":
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è
            return self.check_travel_possibility(event["actor"], event["target"])
            
        return True
```

## 7. –°–ò–°–¢–ï–ú–ê –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò –ò –≠–ö–û–ù–û–ú–ò–ò –¢–û–ö–ï–ù–û–í

### –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏
```python
def calculate_location_importance(location: Dict, global_state: Dict) -> float:
    """–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤–∞–∂–Ω–æ—Å—Ç—å –ª–æ–∫–∞—Ü–∏–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏"""
    importance = 0.0
    
    # –ù–∞—Å–µ–ª–µ–Ω–∏–µ
    importance += min(1.0, location["population"] / 10000) * 0.3
    
    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞–∂–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π  
    important_chars = sum(1 for char in location["characters"] 
                         if char["chronicle_importance"] > 0.5)
    importance += min(1.0, important_chars / 5) * 0.3
    
    # –ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    if location["type"] in ["capital", "major_city"]:
        importance += 0.2
    elif location["type"] in ["city", "fortress"]:
        importance += 0.1
        
    # –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π (–∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π)
    recent_activity = get_recent_event_count(location["id"], days=7)
    importance += min(1.0, recent_activity / 20) * 0.2
    
    return min(1.0, importance)

def assign_detail_levels():
    """–†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ª–æ–∫–∞—Ü–∏–∏ –ø–æ —É—Ä–æ–≤–Ω—è–º –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏"""
    locations = load_all_locations()
    
    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏
    locations_with_importance = [
        (loc, calculate_location_importance(loc, global_state)) 
        for loc in locations
    ]
    locations_with_importance.sort(key=lambda x: x[1], reverse=True)
    
    total_locations = len(locations_with_importance)
    
    # –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–Ω–∏: 20% –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö, 30% –≤–∞–∂–Ω—ã—Ö, 50% —Ñ–æ–Ω–æ–≤—ã—Ö
    for i, (location, importance) in enumerate(locations_with_importance):
        if i < total_locations * 0.2:
            location["detail_level"] = "critical"
        elif i < total_locations * 0.5:
            location["detail_level"] = "important"  
        else:
            location["detail_level"] = "background"
```

### –°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```python
class ContextCache:
    def __init__(self):
        self.character_summaries = {}
        self.location_summaries = {}
        self.event_templates = {}
        
    def get_character_summary(self, character_id: str) -> str:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –¥–ª—è –ø—Ä–æ–º–ø—Ç–æ–≤"""
        if character_id not in self.character_summaries:
            char = load_character(character_id)
            summary = f"{char['name']} ({char['age']}): {char['profession']}, " \
                     f"—Ü–µ–ª–∏: {[g['type'] for g in char['goals'][:2]]}"
            self.character_summaries[character_id] = summary
        return self.character_summaries[character_id]
        
    def invalidate_character(self, character_id: str):
        """–°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∫—ç—à –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞"""
        if character_id in self.character_summaries:
            del self.character_summaries[character_id]
```

### –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ LLM –º–æ–¥–µ–ª–∏
```python
class TieredLLMManager:
    def __init__(self, config: Dict):
        # –¢—è–∂–µ–ª–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
        self.heavy_model = "gpt-4o"  
        # –õ–µ–≥–∫–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á
        self.light_model = "gpt-4o-mini"
        # –õ–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∫—ç—à–∏—Ä—É–µ–º—ã—Ö –∑–∞–¥–∞—á
        self.local_model = "phi-3-mini"
        
    async def generate_events(self, context: Dict, importance: str):
        """–í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞–∂–Ω–æ—Å—Ç–∏"""
        if importance == "critical":
            return await self.call_llm(self.heavy_model, context, max_tokens=1500)
        elif importance == "important":  
            return await self.call_llm(self.light_model, context, max_tokens=800)
        else:
            return await self.call_llm(self.local_model, context, max_tokens=400)
```

## 8. MVP –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø - –ü–û–®–ê–ì–û–í–´–ô –ü–õ–ê–ù

### –≠—Ç–∞–ø 1: –û—Å–Ω–æ–≤–∞ (1-2 –¥–Ω—è)
```bash
# 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
mkdir world_simulation && cd world_simulation
python -m venv venv && source venv/bin/activate
pip install pyyaml openai anthropic asyncio

# 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∏—Ä–∞
python tools/init_world.py --name "TestWorld" --locations 2 --characters 10

# 3. –ë–∞–∑–æ–≤—ã–π —Ü–∏–∫–ª –±–µ–∑ LLM
python engine/world_engine.py --days 3 --mode debug
```

#### init_world.py
```python
#!/usr/bin/env python3
import yaml
import json
import os
import argparse
from pathlib import Path

def create_test_world(name: str, num_locations: int, num_characters: int):
    """–°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π –º–∏—Ä —Å –±–∞–∑–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏"""
    
    # –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫
    base_path = Path("data")
    base_path.mkdir(exist_ok=True)
    
    # –ö–æ–Ω—Ñ–∏–≥ –º–∏—Ä–∞
    config = {
        "world": {
            "name": name,
            "start_day": 1,
            "current_day": 1,
            "time_scale": "1_day"
        },
        "simulation": {
            "max_events_per_location_per_day": 3,
            "population_event_multiplier": 0.001
        },
        "llm": {
            "provider": "openai",
            "model": "gpt-4o-mini",
            "max_tokens": 1000
        }
    }
    
    with open("config.yaml", "w") as f:
        yaml.dump(config, f, default_flow_style=False)
    
    # –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –ª–æ–∫–∞—Ü–∏–∏
    continent_path = base_path / "continents" / "testland"
    region_path = continent_path / "regions" / "central"
    continent_path.mkdir(parents=True, exist_ok=True)
    region_path.mkdir(parents=True, exist_ok=True)
    
    locations = ["irongate_city", "mistwood_village"][:num_locations]
    
    for i, loc_name in enumerate(locations):
        loc_path = region_path / "locations" / loc_name
        loc_path.mkdir(parents=True, exist_ok=True)
        
        # –°–æ—Å—Ç–æ—è–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏
        state = {
            "name": loc_name.replace("_", " ").title(),
            "type": "city" if "city" in loc_name else "village",
            "population": 5000 - i * 2000,
            "detail_level": "critical" if i == 0 else "important",
            "resources": {"food": 0.8, "materials": 0.7, "wealth": 0.6},
            "conditions": {"weather": "clear", "mood": 0.7, "stability": 0.8}
        }
        
        with open(loc_path / "state.yaml", "w") as f:
            yaml.dump(state, f, default_flow_style=False)
        
        # –ü–µ—Ä—Å–æ–Ω–∞–∂–∏
        characters = []
        chars_per_location = num_characters // num_locations
        
        for j in range(chars_per_location):
            char = {
                "id": f"npc_{loc_name}_{j:04d}",
                "name": f"Character_{j}",
                "age": 20 + j * 3,
                "location": loc_name,
                "profession": ["farmer", "trader", "guard", "crafter"][j % 4],
                "traits": {"brave": 0.5, "social": 0.5},
                "vital_stats": {"health": 0.9, "wealth": 0.5, "reputation": 0.5},
                "relationships": {},
                "goals": [{"type": "survive", "priority": 1.0}],
                "history": [],
                "chronicle_importance": 0.1 + (j % 3) * 0.3
            }
            characters.append(char)
        
        with open(loc_path / "people.json", "w") as f:
            json.dump(characters, f, indent=2)
        
        # –ü—É—Å—Ç–∞—è –æ—á–µ—Ä–µ–¥—å —Å–æ–±—ã—Ç–∏–π
        with open(loc_path / "events_queue.json", "w") as f:
            json.dump({"events": []}, f, indent=2)
    
    print(f"–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –º–∏—Ä '{name}' —Å {num_locations} –ª–æ–∫–∞—Ü–∏—è–º–∏ –∏ {num_characters} –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏")
    print("–ó–∞–ø—É—Å–∫: python engine/world_engine.py --days 5")

if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    parser.add_argument("--name", default="TestWorld")
    parser.add_argument("--locations", type=int, default=2)
    parser.add_argument("--characters", type=int, default=10)
    
    args = parser.parse_args()
    create_test_world(args.name, args.locations, args.characters)
```

### –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è LLM (2-3 –¥–Ω—è)
```python
# llm_manager.py - –ø—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è
class SimpleLLMManager:
    def __init__(self, config):
        self.config = config
        if config["provider"] == "openai":
            import openai
            self.client = openai.OpenAI()
        
    async def generate_location_events(self, context, max_events=3):
        prompt = f"""
        –õ–æ–∫–∞—Ü–∏—è: {context['location_name']} (–Ω–∞—Å–µ–ª–µ–Ω–∏–µ: {context['population']})
        –¢–µ–∫—É—â–∏–π –¥–µ–Ω—å: {context['day']}
        
        –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π {max_events} –ø—Ä–æ—Å—Ç—ã—Ö —Å–æ–±—ã—Ç–∏—è –¥–ª—è —ç—Ç–æ–≥–æ –¥–Ω—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ:
        {{"events": [{{"type": "social", "actor": "character_id", "action": "–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"}}]}}
        
        –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π: social, economic, personal, travel
        """
        
        response = await self.client.chat.completions.create(
            model=self.config["model"],
            messages=[{"role": "user", "content": prompt}],
            max_tokens=self.config["max_tokens"]
        )
        
        return json.loads(response.choices[0].message.content)
```

### –≠—Ç–∞–ø 3: –•—Ä–æ–Ω–∏–∫–∏ –∏ —ç–∫—Å–ø–æ—Ä—Ç (1 –¥–µ–Ω—å)
```python
# chronicle_generator.py
class ChronicleGenerator:
    def generate_daily_summary(self, all_events, day):
        important_events = [e for e in all_events if e.get("chronicle_worthy", False)]
        
        if not important_events:
            return f"–î–µ–Ω—å {day}: –¢–∏—Ö–∏–π –¥–µ–Ω—å –≤–æ –≤—Å–µ—Ö –∑–µ–º–ª—è—Ö."
        
        summary_parts = []
        for event in important_events[:5]:  # –¢–æ–ø 5 —Å–æ–±—ã—Ç–∏–π
            summary_parts.append(f"–í {event['location']}: {event['action']}")
        
        return f"–î–µ–Ω—å {day}: " + ". ".join(summary_parts) + "."
```

## 9. –ü–û–î–í–û–î–ù–´–ï –ö–ê–ú–ù–ò –ò –†–ï–®–ï–ù–ò–Ø

### –ü—Ä–æ–±–ª–µ–º–∞: –õ–∞–≤–∏–Ω–∞ —Å–æ–±—ã—Ç–∏–π
```python
def prevent_event_avalanche(location, events):
    """–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π"""
    max_events = max(1, location["population"] // 1000)  # 1 —Å–æ–±—ã—Ç–∏–µ –Ω–∞ 1000 –∂–∏—Ç–µ–ª–µ–π
    return events[:max_events]
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã–µ —Å–æ–±—ã—Ç–∏—è
```python
class ConsistencyChecker:
    def __init__(self):
        self.global_facts = {}
        
    def check_event_consistency(self, event, global_state):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è"""
        if event["type"] == "death":
            char_id = event["actor"]
            if char_id in self.global_facts.get("dead_characters", []):
                return False, "Character already dead"
        
        if event["type"] == "travel":
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂ —É–∂–µ
            if self.is_character_traveling(event["actor"]):
                return False, "Character already traveling"
        
        return True, "OK"
```

### –ü—Ä–æ–±–ª–µ–º–∞: –î–µ–≥—Ä–∞–¥–∞—Ü–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–≤ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
```python
def maintain_character_consistency(character, event):
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ–±—ã—Ç–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞"""
    if event["type"] == "heroic_action" and character["traits"]["brave"] < 0.3:
        event["probability"] *= 0.1  # –°–Ω–∏–∂–∞–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
    
    if event["type"] == "generous_gift" and character["traits"]["greedy"] > 0.7:
        event["probability"] *= 0.1
    
    return event
```

## 10. –†–ê–°–®–ò–†–ï–ù–ò–ï –ò –ú–û–î–£–õ–ò

### –°–∏—Å—Ç–µ–º–∞ –º–æ–¥–æ–≤
```python
# /mods/medieval_fantasy.py
class MedievalFantasyMod:
    def __init__(self):
        self.additional_event_types = {
            "magic_discovery": {"chronicle_chance": 0.9},
            "dragon_sighting": {"chronicle_chance": 1.0},
            "spell_casting": {"chronicle_chance": 0.3}
        }
        
    def modify_character_generation(self, character):
        # –î–æ–±–∞–≤–ª—è–µ–º –º–∞–≥–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
        character["magic_power"] = random.uniform(0, 1)
        return character
        
    def custom_event_rules(self, event, location):
        if event["type"] == "dragon_sighting":
            # –î—Ä–∞–∫–æ–Ω—ã –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –º–∞–ª–µ–Ω—å–∫–∏—Ö –¥–µ—Ä–µ–≤–Ω—è—Ö
            return location["population"] > 1000
        return True
```

### –≠–∫—Å–ø–æ—Ä—Ç –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
```python
# tools/export_chronicles.py
class ChronicleExporter:
    def export_to_markdown(self, start_day, end_day):
        """–≠–∫—Å–ø–æ—Ä—Ç —Ö—Ä–æ–Ω–∏–∫ –≤ –∫—Ä–∞—Å–∏–≤—ã–π Markdown"""
        chronicles = load_chronicles(start_day, end_day)
        
        markdown = f"# –•—Ä–æ–Ω–∏–∫–∏ –º–∏—Ä–∞ {self.world_name}\n\n"
        
        for day, events in chronicles.items():
            markdown += f"## –î–µ–Ω—å {day}\n\n"
            for event in events:
                markdown += f"- **{event['location']}**: {event['description']}\n"
            markdown += "\n"
        
        return markdown
        
    def generate_statistics(self, start_day, end_day):
        """–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–∑–≤–∏—Ç–∏—è –º–∏—Ä–∞"""
        stats = {
            "total_events": 0,
            "births": 0,
            "deaths": 0,
            "marriages": 0,
            "conflicts": 0,
            "location_activity": {}
        }
        
        chronicles = load_chronicles(start_day, end_day)
        for day, events in chronicles.items():
            for event in events:
                stats["total_events"] += 1
                stats[event["type"]] = stats.get(event["type"], 0) + 1
                
                loc = event["location"]
                stats["location_activity"][loc] = stats["location_activity"].get(loc, 0) + 1
        
        return stats
```

## 11. –ì–û–¢–û–í–´–ô –°–¢–ê–†–¢–û–í–´–ô –ö–ò–¢

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞
```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –º–∏—Ä–∞
python tools/init_world.py --name "MyWorld" --locations 3 --characters 15

# –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏
python engine/world_engine.py --days 30 --verbose

# –≠–∫—Å–ø–æ—Ä—Ç —Ö—Ä–æ–Ω–∏–∫  
python tools/export_chronicles.py --format markdown --days 1-30 --output chronicles.md

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∏—Ä–∞
python tools/world_stats.py --days 1-30
```

### –§–∞–π–ª requirements.txt
```
pyyaml>=6.0
openai>=1.0.0
anthropic>=0.18.0
asyncio
aiofiles
click>=8.0
rich>=13.0
```

## 12. –ê–ù–ê–õ–ò–ó –û–ü–¢–ò–ú–ê–õ–¨–ù–û–°–¢–ò –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### ‚úÖ –ß—Ç–æ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û –¥–ª—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π —Å–∏–º—É–ª—è—Ü–∏–∏:

#### –û—Å–Ω–æ–≤–∞ —Å–∏—Å—Ç–µ–º—ã (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- **–ü–µ—Ä—Å–æ–Ω–∞–∂–∏ —Å —Ü–µ–ª—è–º–∏**: –î–≤–∏–∂—É—â–∞—è —Å–∏–ª–∞ —Å–æ–±—ã—Ç–∏–π
- **–°–∏—Å—Ç–µ–º–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π**: –°–æ–∑–¥–∞–µ—Ç –¥—Ä–∞–º—É –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã  
- **–ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –º–∏—Ä–∞**: 10 —á–µ—Ç–∫–∏—Ö –ø—Ä–∞–≤–∏–ª –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –ª–æ–≥–∏–∫—É
- **–ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è

#### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
- **–¢—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π**: active/background/dormant
- **Batch-–æ–±—Ä–∞–±–æ—Ç–∫–∞**: –î–ª—è –±–æ–ª—å—à–∏—Ö –ø–æ–ø—É–ª—è—Ü–∏–π
- **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**: –≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ LLM**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç

### ‚ùå –ß—Ç–æ –º–æ–∂–Ω–æ –£–ü–†–û–°–¢–ò–¢–¨ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–∞:

#### –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- ~~relationships.json –æ—Ç–¥–µ–ª—å–Ω–æ~~ ‚Üí –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å people.json
- ~~–î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –ª–æ–∫–∞—Ü–∏–π~~ ‚Üí –¢–æ–ª—å–∫–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö
- ~~–°–ª–æ–∂–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å~~ ‚Üí –ë–∞–∑–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
- ~~–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—è~~ ‚Üí –ö–æ–Ω—Ç–∏–Ω–µ–Ω—Ç‚Üí–õ–æ–∫–∞—Ü–∏—è (–±–µ–∑ —Ä–µ–≥–∏–æ–Ω–æ–≤)

#### –í—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- –°–ª–æ–∂–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ (–±–∞–∑–æ–≤—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)
- –î–µ—Ç–∞–ª—å–Ω–∞—è –º–∞–≥–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ)
- –ü–æ–≥–æ–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–≤–ª–∏—è–µ—Ç –º–∞–ª–æ –Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å)
- –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

### üéØ –û–ü–¢–ò–ú–ê–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –¥–ª—è MVP:

```
–û–°–ù–û–í–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ):
‚îú‚îÄ‚îÄ –ü–µ—Ä—Å–æ–Ω–∞–∂–∏ —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ (active/background/dormant)
‚îú‚îÄ‚îÄ –°–æ–±—ã—Ç–∏—è —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏  
‚îú‚îÄ‚îÄ –õ–æ–∫–∞—Ü–∏–∏ —Å —É—Ä–æ–≤–Ω—è–º–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ –ü—Ä–æ—Å—Ç–∞—è —ç–∫–æ–Ω–æ–º–∏–∫–∞ (4 —Ä–µ—Å—É—Ä—Å–∞)
‚îú‚îÄ‚îÄ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤–∏–ª (10 –ø—Ä–∞–≤–∏–ª)
‚îî‚îÄ‚îÄ –•—Ä–æ–Ω–∏–∫–∏ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

–û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–ª—è 10-1000 —Å—É—â–µ—Å—Ç–≤):
‚îú‚îÄ‚îÄ Batch-–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
‚îú‚îÄ‚îÄ –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ LLM –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
‚îú‚îÄ‚îÄ –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–∫–∞—Ü–∏–π

–î–û–ü–û–õ–ù–ï–ù–ò–Ø (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ):
‚îú‚îÄ‚îÄ –°–ª–æ–∂–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ –î–µ—Ç–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏–∫–∞  
‚îú‚îÄ‚îÄ –ú–∞–≥–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îú‚îÄ‚îÄ –ü–æ–≥–æ–¥–∞ –∏ –∫–ª–∏–º–∞—Ç
‚îî‚îÄ‚îÄ –ü–æ–¥—Ä–æ–±–Ω–∞—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—è
```

### üìä –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–®–ù–û–°–¢–ò MVP:

1. **–ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å**: –°–∏–º—É–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç >7 –¥–Ω–µ–π –±–µ–∑ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞
2. **–°—Ç–æ–∏–º–æ—Å—Ç—å**: <$5 –Ω–∞ 1000 —Å—É—â–µ—Å—Ç–≤ –≤ –º–µ—Å—è—Ü
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–Ω—è <30 —Å–µ–∫—É–Ω–¥ –¥–ª—è 100 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
4. **–ò–Ω—Ç–µ—Ä–µ—Å**: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è >3 –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –≤ –¥–µ–Ω—å
5. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: <1% –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π

### üöÄ –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º):

#### –§–∞–∑–∞ 1: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –±–∞–∑–∞ (3-5 –¥–Ω–µ–π)
1. –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ —Å –Ω–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –ü—Ä–æ—Å—Ç–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (—Ç–æ–ª—å–∫–æ –∫–æ–¥)
3. –ë–∞–∑–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –±–µ–∑ LLM
4. –ü—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ —Ö—Ä–æ–Ω–∏–∫–∏

#### –§–∞–∑–∞ 2: LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (5-7 –¥–Ω–µ–π)  
1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π —Å–æ–±—ã—Ç–∏–π
2. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
3. –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
4. –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Ö—Ä–æ–Ω–∏–∫–∏

#### –§–∞–∑–∞ 3: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (3-5 –¥–Ω–µ–π)
1. –°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
2. Batch-–æ–±—Ä–∞–±–æ—Ç–∫–∞
3. –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ LLM –º–æ–¥–µ–ª–∏
4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –§–∞–∑–∞ 4: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ (2-3 –¥–Ω—è)
1. –£–ª—É—á—à–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
2. –≠–∫—Å–ø–æ—Ä—Ç –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –±–æ–ª—å—à–∏—Ö –º–∏—Ä–∞—Ö
4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üí° –ö–õ–Æ–ß–ï–í–´–ï –ü–†–ò–ù–¶–ò–ü–´ –î–õ–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–ò:

1. **–ù–∞—á–∏–Ω–∞–π –ø—Ä–æ—Å—Ç–æ**: –°–Ω–∞—á–∞–ª–∞ 10 –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, –ø–æ—Ç–æ–º –º–∞—Å—à—Ç–∞–±–∏—Ä—É–π
2. **–ö–æ–¥ –ø–µ—Ä–≤—ã–π**: –ï—Å–ª–∏ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–æ–¥–æ–º - –¥–µ–ª–∞–π –∫–æ–¥–æ–º
3. **LLM –¥–ª—è –∫—Ä–µ–∞—Ç–∏–≤–∞**: –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞
4. **–ò–∑–º–µ—Ä—è–π –∑–∞—Ç—Ä–∞—Ç—ã**: –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ API —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è
5. **–¢–µ—Å—Ç–∏—Ä—É–π –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π –Ω–∞ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

---

### üéØ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –†–ï–ê–õ–ò–ó–ê–¶–ò–ò:
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–∞—è –∏ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ª–æ–≥–∏—á–Ω–æ —Å–≤—è–∑–∞–Ω—ã, –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞. –ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é –≤ —Ç–æ–º, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è 10-1000 —Å—É—â–µ—Å—Ç–≤ –ø—Ä–∏ —Ä–∞–∑—É–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç–∞—Ö –Ω–∞ API.

**–° —á–µ–≥–æ –ª—É—á—à–µ –Ω–∞—á–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?**
1. –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ 
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å init_world.py —Å –Ω–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç —Å 10 –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ –±–µ–∑ LLM